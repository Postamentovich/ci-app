# School CI Server

Build Server и Build Agent находятся в репозитории https://github.com/Postamentovich/shri-ci-build

## ДЗ по тестированию

Проект тестами покрыт не полностью, времени хватило только на то что-бы попробовать различные виды тестирования.<br>
Тесты находятся в папке `src/__tests__/`

Запуск юнит тестов

```shell
$ npm run test
```

Запуск интеграционных тестов

```shell
$ npm run start
$ npm run e2e
```

### Добавлены следующие юнит тесты:

#### Серверная часть:

-   Тестирование эндпонитов api/settings
-   Тестирование эндпонитов api/builds
-   Тестирование работы с локальным репозиторием:
    -   Клонирование репозитория
    -   Переключение ветки репозитория
    -   Получение последних коммитов
    -   Добавление билда в очередь

#### Клиентская часть:

-   Тестирование хелперов (форматирование времени, форматирование даты)
-   Тестирование страницы настроек
    -   Данные из store попадают в нужные поля
    -   Все поля присутствуют на странице
    -   Поля обрабатываются
    -   Валидация необходимых полей

### Добавлены следующие интеграционные тесты:

-   Страница истории

    -   Открытие страницы
    -   Запуск нового билда
    -   Переход на страницу настроек

-   Страница настроек

    -   Открытие страницы
    -   Нажатие кнопки отмены

---

## Описание проекта

## Установка и запуск

```shell
$ npm install
$ npm run start
```

#### NPM скрипты

`npm run start` - запуск проекта <br>
`npm run test` - запуск юнит тестов <br>
`npm run build` - сборка проекта <br>
`npm run analyze` - анализ собранного бандла <br>
`npm run e2e` - запуск интеграционных тестов <br>

## Описание проекта

### Серверная часть

#### Переменные окружения

В корне проекта в файл .env нужно добавить токен авторизации https://hw.shri.yandex/

API_TOKEN=YOUR_API_TOKEN

#### Node.js

Версия Node.js - 13.5

#### Документация

Swagger доступен по ссылке /swagger

### Клиентская часть

#### Используемые технологии

-   Typescript
-   @bem/react
-   Redux Toolkit
-   Jest
-   Hermione

#### Структура проекта

```
├── config/               # Конфигурационные файлы для webpack, jest
├── scripts/              # NPM скрипты
└── src/                  # Исходные файлы
    ├── __test__/         # Тесты
    ├── __mocks__/        # Моки для тестов
    ├── client/           # Клиентская часть
    ├── server/           # Серверная часть
    └── shared/           # Общая часть

```

#### В планах доделать:

Клиентская часть:

-   Добавить автоматический запрос лога
-   Разобраться с варнингом для кнопки
-   прикрутить SASS, после изменения архитектуры проета остался только чистый css

Серверная часть:

-   Поправить логику получения последних коммитов
-   Поправить порядок билдов
